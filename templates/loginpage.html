<html>

   <head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-143664123-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-143664123-1');
</script>
<title>
Login to Lokly
</title>
   </head>
	<style>
		@import url(https://fonts.googleapis.com/css?family=Roboto);

html {
  scroll-behavior: smooth;
}
	
	
body{
  background-repeat: no-repeat;
  background-attachment: fixed;
  background-position: top;
  background-size: 100% 500px;
  padding:0;
  margin:0;
  background-attachment: fixed;
  font-family: Roboto;
  font-size:120%;
  color:#000000;
  
}



.search {
  width: 100%;
  position: relative
}

.searchTerm {
  float: center;
  width: 90%;
  padding: 5px;
  height: 40px;
  border-radius: 5px;
  font-weight: bold;
  font-size: bold;
  outline: none;
  border:1px solid #dddddd;
  color:black;
}

.searchTerm:focus{
  color: #00B4CC;
}


.nextButton {
  position: absolute;  
  width: 30%;
  top: 80%;
  right:3%;
  height: 8%;
  border: 1px solid #00B4CC;
  background: #16B647;
  text-align: center;
  color: #fff;
  border-radius: 5px;
  cursor: pointer;
  font-size: 20px;
}

.loginButton {
  position: absolute;  
  width: 40%;
  left: 0%;
  top:80%;
  padding:0;
  height: 8%;
  border: 0px;
  background: none;
  text-align: center;
  color: blue;
  border-radius: 0px;
  cursor: pointer;
  font-size: 20px;
    font-family: 'Roboto';
}

.loginbarButton {
  position: fixed;  
  right: 8%;
  top:2%;
  padding:0;
  height: 4%;
  border: 0px;
  background: #ffffff;
  text-align: center;
  color: #000000;
  border-radius: 0px;
  cursor: pointer;
  font-size: 16px;
    font-family: 'Roboto';
}

.signupbarButton {
  position: fixed;  
  right: 2%;
  top:2%;
  padding:0;
  height: 4%;
  border: 0px;
  background: #ffffff;
  text-align: center;
  color: #000000;
  border-radius: 0px;
  cursor: pointer;
  font-size: 16px;
    font-family: 'Roboto';
}


.homebarButton {
  position: fixed;  
  left: 1%;
  top:0%;
  border: 0px;
  background: #ffffff;
  text-align: center;
  color: #000000;
  border-radius: 0px;
  cursor: pointer;
  font-family: 'Roboto';
  font-size: 30px;
  padding:0;
  outline:none;
  
}

.namebartext {
  position: fixed;  
  right: 8%;
  top:2.5%;
  height: 5%;
  border: 0px;
  background: #ffffff;
  text-align: center;
  color: #000000;
  border-radius: 0px;
  font-family: 'Roboto';
  font-size: 16px;
  padding:0;
  
}



.loader {
  border: 16px solid #f3f3f3;
  border-radius: 50%;
  margin-left:45%;
  position:relative;
  align:center;
  float:center;
  border-top: 16px solid #3498db;
  width: 20px;
  height: 20px;
  -webkit-animation: spin 2s linear infinite; /* Safari */
  animation: spin 2s linear infinite;
}

/* Safari */
@-webkit-keyframes spin {
  0% { -webkit-transform: rotate(0deg); }
  100% { -webkit-transform: rotate(360deg); }
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/*Resize the wrap to see the search bar change!*/
}
.wrap{
  width: 80%;
  position: relative;
  top: 10%;
  left: 50%;
  transform: translate(-50%, -50%);
}


a{
	color : black;
	text-decoration: none;
}



/*Resize the wrap to see the head change!*/
.head{
  width: 100%;
  position: relative;
  text-align: center;
  top: 5%;
  left: 50%;
  transform: translate(-50%, -50%);
}

div {
    display: block;
}
#wrapper {

    width: 100%;
    height:100%;
}


#first {
	border:1px solid #dddddd;
	border-radius:20px;
	position:relative;
    float:center;
    width: 30%;
	top:20%;
    height: 60%;
	margin-left:35%;
}


#third {
	position:fixed;
    width: 100%;
	bottom:0%;
    height: 6%;
	background: #D9D9D9 ;
}

.round{
  border-radius: 8px 8px 8px 8px;

}

.fontRoboto{
font-family: Roboto;
}





</style>
   <a href="\"> <button type="submit" class="homebarButton"><img src="/static/logo.png" style='height:80px; width:80px;' alt="logo"></button></a>
   <a href="\loginpage"> <button type="submit" class="loginbarButton" id='loginbar'>Login</button></a>
   <a href="\signup"> <button type="submit" class="signupbarButton" id='signupbar'>Sign Up</button></a>
   <button type="submit" class="signupbarButton" id='Logout' style="display: none;">Logout</button>
   <div id='namebar' class="namebartext" style="display: none;"></div>
<div class='fontRoboto'>
   <body align='center'>
   <div id="wrapper">
    <div id="first">
		    <h2 style='font-size:40;' align='center' class='fontRoboto'> Login </h2>

      <div class="wrap">	

			<div class="search">
			<br>
			<br>
			<input type="text" style=' color:black; font-size:90% ;padding-left: 12px;' class="searchTerm round fontRoboto" placeholder="Enter email id" name="email_login" id="email_login">
			<input type="text" style=' color:black; font-size:90% ;padding-left: 12px; display: none;' class="searchTerm round fontRoboto"  placeholder="Enter OTP" name="otp_login" id="otp_login">
			<br>
			<br>
		<div id='Login_error' style='font-size:18px' ></div>

			</div>		
				</div>
			<button type="submit" class="nextButton" id='Login' style="display: none;">Login</button>
			<button type="submit" class="nextButton" id='send_otp'>Next</button>
				  <div id='loading' class='loader' style="display: none;"></div>
			<a href="\signup" ><button type="submit" class="loginButton" id='signup'>Create Account</button></a>

				</div>		
				<br>
			<br>

			<br>
			<br>

	</div>
	  </div>
	  <div id='third' >
	  <div style='padding-top:0.5%; '>
		<a href='\about' style='padding-right:10%; '>About Us</a><a href='\contact' style='padding-right:10%'>Contact Us</a>Terms and Conditions
	  </div>
				</div>		
      <script
  src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>

  <script type="text/javascript">

      $('button#Login').click(function(){
        $.ajax({
            url: "/login_via_otp?otp_login="+document.getElementById('otp_login').value+"&user_id="+sessionStorage.getItem("login_user"),
            type: "GET",
            success: function(resp){
				if (resp.data)
				{
				$('#Login_error').html(resp.data);
				$('#Login_error').show();
				
				}				
				else				
				{
				sessionStorage.setItem("app_user",resp.id);
				sessionStorage.setItem("app_username",resp.name);
				window.location.href = '\\';
				document.getElementById("email_login").value = '';
				document.getElementById("otp_login").value = '';
				}


            }
        });
      });
	  $('button#send_otp').click(function(){
			$('#loading').show();
			$('#Login_error').show();
        $.ajax({
            url: "/send_otp_to_login?email_login="+document.getElementById('email_login').value,
            type: "GET",
            success: function(resp){
				if (resp.data)
				{
				$('#Login_error').html(resp.data);
				$('#Login_error').show();
				}				
				else				
				{
				sessionStorage.setItem("login_user",resp.id);
				$('#Login_error').html('OTP has been sent to '+document.getElementById('email_login').value);
				$('#Login_error').show();
				$('#Login').show();
				$('#send_otp').hide();
				$('#otp_login').show();
				$('#email_login').hide();
				}
				$('#loading').hide();


            }
        });
      });
	var user = sessionStorage.getItem("app_user");
	  if (user!='Guest' && user!=null)
	  {
        $.ajax({
            url: "/refresh?&user_id="+user,
            type: "GET",
            success: function(resp){
				if (resp.data)
				{

				
				}				
				else				
				{
				window.location.href = '\\';
				}


            }
        });
    }; 



  </script>
  </body>
   
</html>